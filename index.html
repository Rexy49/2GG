<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Compare Permutations from Two Grids</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  h1 { text-align: center; }
  .container { display: flex; justify-content: space-between; }
  .grid-container { width: 45%; display: inline-block; vertical-align: top; }
  .grid { display: grid; grid-template-columns: repeat(4, 50px); gap: 10px; margin-top: 10px; }
  input { width: 50px; height: 50px; text-align: center; font-size: 20px; }
  button { padding: 10px 20px; font-size: 16px; margin-top: 10px; display: block; width: 100%; }
  .results { margin-top: 20px; max-height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; white-space: pre-wrap; font-family: monospace; }
  h2 { text-align: center; }
  .comparison { margin-top: 20px; }
  .side-by-side { display: flex; justify-content: space-around; }
  .column { width: 45%; }
  .common-permutations { white-space: pre; font-family: monospace; }
</style>
</head>
<body>

<h1>Generate and Compare Permutations from Two Grids</h1>

<div class="container">
  <!-- Left Grid -->
  <div class="grid-container" id="grid1Container">
    <h2>Grid 1</h2>
    <div class="grid" id="grid1">
      <input maxlength="1" value="1" /> <input maxlength="1" value="3" /> <input maxlength="1" value="4" /> <input maxlength="1" value="6" />
      <input maxlength="1" value="3" /> <input maxlength="1" value="4" /> <input maxlength="1" value="7" /> <input maxlength="1" value="6" />
      <input maxlength="1" value="4" /> <input maxlength="1" value="6" /> <input maxlength="1" value="7" /> <input maxlength="1" value="8" />
      <input maxlength="1" value="2" /> <input maxlength="1" value="5" /> <input maxlength="1" value="7" /> <input maxlength="1" value="9" />
    </div>
    <button id="generate1">Generate from Grid 1</button>
    <button id="compare1">Compare Permutations</button>
    <div id="result1" class="results"></div>
  </div>

  <!-- Right Grid -->
  <div class="grid-container" id="grid2Container">
    <h2>Grid 2</h2>
    <div class="grid" id="grid2">
      <input maxlength="1" value="2" /> <input maxlength="1" value="4" /> <input maxlength="1" value="5" /> <input maxlength="1" value="7" />
      <input maxlength="1" value="3" /> <input maxlength="1" value="5" /> <input maxlength="1" value="8" /> <input maxlength="1" value="7" />
      <input maxlength="1" value="4" /> <input maxlength="1" value="7" /> <input maxlength="1" value="8" /> <input maxlength="1" value="9" />
      <input maxlength="1" value="1" /> <input maxlength="1" value="4" /> <input maxlength="1" value="6" /> <input maxlength="1" value="8" />
    </div>
    <button id="generate2">Generate from Grid 2</button>
    <button id="compare2">Compare Permutations</button>
    <div id="result2" class="results"></div>
  </div>
</div>

<!-- Section for common permutations side by side -->
<div class="comparison" id="comparisonSection" style="display:none;">
  <h2>Common Permutations</h2>
  <div class="side-by-side">
    <div class="column" id="commonLeft">
      <h3>From Grid 1</h3>
      <div class="common-permutations" id="commonPermsLeft"></div>
    </div>
    <div class="column" id="commonRight">
      <h3>From Grid 2</h3>
      <div class="common-permutations" id="commonPermsRight"></div>
    </div>
  </div>
</div>

<script>
// Store generated combinations globally
let combos1 = [];
let combos2 = [];

// Function to get grid data as columns (top to bottom)
function getColumns(gridId) {
  const inputs = document.querySelectorAll(`#${gridId} input`);
  const columns = [[], [], [], []];
  for (let colIdx = 0; colIdx < 4; colIdx++) {
    for (let rowIdx = 0; rowIdx < 4; rowIdx++) {
      const index = rowIdx * 4 + colIdx;
      const val = inputs[index].value.trim();
      if (val !== '') {
        columns[colIdx].push(val);
      }
    }
  }
  return columns;
}

// Generate all combinations by picking one element from each column
function generateColumnCombinations(columns) {
  const results = new Set();
  for (let a of columns[0]) {
    for (let b of columns[1]) {
      for (let c of columns[2]) {
        for (let d of columns[3]) {
          const combo = a + ' ' + b + ' ' + c + ' ' + d;
          results.add(combo);
        }
      }
    }
  }
  return Array.from(results);
}

function showResults(containerId, combos) {
  document.getElementById(containerId).textContent = combos.join('\n');
}

function findCommon(combosA, combosB) {
  const setA = new Set(combosA);
  const setB = new Set(combosB);
  const common = [...setA].filter(x => setB.has(x));
  return common;
}

// Generate handlers
document.getElementById('generate1').addEventListener('click', () => {
  const columns = getColumns('grid1');
  combos1 = generateColumnCombinations(columns);
  showResults('result1', combos1);
});

document.getElementById('generate2').addEventListener('click', () => {
  const columns = getColumns('grid2');
  combos2 = generateColumnCombinations(columns);
  showResults('result2', combos2);
});

// Compare handlers
document.getElementById('compare1').addEventListener('click', () => {
  if (combos1.length === 0) {
    alert('Please generate permutations from Grid 1 first.');
    return;
  }
  if (combos2.length === 0) {
    alert('Please generate permutations from Grid 2 first.');
    return;
  }
  const common = findCommon(combos1, combos2);
  displayCommonPermutations(common);
});

document.getElementById('compare2').addEventListener('click', () => {
  if (combos1.length === 0) {
    alert('Please generate permutations from Grid 1 first.');
    return;
  }
  if (combos2.length === 0) {
    alert('Please generate permutations from Grid 2 first.');
    return;
  }
  const common = findCommon(combos1, combos2);
  displayCommonPermutations(common);
});

function displayCommonPermutations(commonArray) {
  document.getElementById('comparisonSection').style.display = 'block';
  const leftDiv = document.getElementById('commonPermsLeft');
  const rightDiv = document.getElementById('commonPermsRight');

  leftDiv.innerHTML = '';
  rightDiv.innerHTML = '';

  if (commonArray.length === 0) {
    leftDiv.textContent = 'No common permutations.';
    rightDiv.textContent = 'No common permutations.';
    return;
  }

  // Display the permutations neatly side by side
  commonArray.forEach(perm => {
    const leftItem = document.createElement('div');
    leftItem.textContent = perm;
    leftDiv.appendChild(leftItem);

    const rightItem = document.createElement('div');
    rightItem.textContent = perm;
    rightDiv.appendChild(rightItem);
  });
}
</script>

</body>
</html>

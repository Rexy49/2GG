<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>4x4 Grid with Generate & Search</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 0 auto;
    max-width: 1200px;
    padding: 20px;
}
h1 {
    text-align: center;
}
.controls, .search-bar, .display-area {
    margin-bottom: 20px;
}
button {
    padding: 8px 15px;
    margin-right: 10px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
button:hover {
    background-color: #45a049;
}
#gridContainer {
    display: flex;
    flex-direction: row; /* side by side */
    flex-wrap: wrap; /* wrap on small screens */
    justify-content: center;
    gap: 20px;
}
.grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 5px;
}
.cell {
    border: 1px solid #ccc;
    padding: 15px;
    text-align: center;
    font-weight: bold;
    background-color: #f9f9f9;
}
.cell input {
    width: 50px;
    height: 50px;
    font-size: 24px;
    text-align: center;
}
#fullNumberDisplay {
    display: flex;
    flex-wrap: nowrap;
    overflow-x: auto;
    padding: 10px 0;
    border: 1px solid #ccc;
}
.number-block {
    display: inline-block;
    padding: 8px 12px;
    margin: 0 2px;
    background-color: #e0e0e0;
    border-radius: 4px;
    font-size: 20px;
    min-width: 40px;
    text-align: center;
}
.highlight {
    background-color: #ffeb3b;
}
</style>
</head>
<body>

<h1>4x4 Grid with Generate & Search</h1>

<div class="controls">
    <button id="generateBtn">Generate Grids</button>
    <button id="clearBtn">Clear All</button>
</div>

<div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search sequences, e.g., 12 or 123" style="width: 200px; font-size:16px; padding:8px;"/>
    <button id="searchBtn">Search</button>
</div>

<div id="gridContainer">
    <div>
        <h2 style="text-align:center;">Grid 1</h2>
        <div id="grid1" class="grid"></div>
    </div>
    <div>
        <h2 style="text-align:center;">Grid 2</h2>
        <div id="grid2" class="grid"></div>
    </div>
</div>

<h2 style="text-align:center;">All Numbers (Side by Side)</h2>
<div id="fullNumberDisplay"></div>

<h2>Results</h2>
<div id="results"></div>

<script>
const gridSize = 4;

// Create empty grid
function createGrid(gridElement, dataArray) {
    gridElement.innerHTML = '';
    for (let i=0; i<gridSize; i++) {
        for (let j=0; j<gridSize; j++) {
            const input = document.createElement('input');
            input.type = 'text';
            input.maxLength = 1; // only 1 character
            input.pattern = "[0-9]";
            input.placeholder = "0-9";
            input.value = dataArray && dataArray[i] ? dataArray[i][j] : '';
            input.style.width='50px';
            input.style.height='50px';
            input.style.fontSize='24px';
            input.style.textAlign='center';

            // Restrict input to 0-9
            input.addEventListener('input', function() {
                this.value = this.value.replace(/[^0-9]/g, '').slice(0,1);
            });

            const cell = document.createElement('div');
            cell.className='cell';
            cell.appendChild(input);
            gridElement.appendChild(cell);
        }
    }
}

// Get grid values
function getGridValues(gridElement) {
    const inputs = gridElement.querySelectorAll('input');
    const data = [];
    for (let i=0; i<gridSize; i++) {
        data[i] = [];
        for (let j=0; j<gridSize; j++) {
            const val = inputs[i*gridSize + j].value.trim();
            data[i][j] = val !== '' ? val : '';
        }
    }
    return data;
}

// Generate random digits for grids
function generateGrids() {
    const data1 = [];
    const data2 = [];
    for (let i=0; i<gridSize; i++) {
        data1[i] = [];
        data2[i] = [];
        for (let j=0; j<gridSize; j++) {
            data1[i][j] = Math.floor(Math.random()*10).toString();
            data2[i][j] = Math.floor(Math.random()*10).toString();
        }
    }
    createGrid(document.getElementById('grid1'), data1);
    createGrid(document.getElementById('grid2'), data2);
    displayAllNumbers();
    document.getElementById('results').innerHTML = '';
}

// Clear all grids and display
function clearAll() {
    createGrid(document.getElementById('grid1'), []);
    createGrid(document.getElementById('grid2'), []);
    document.getElementById('fullNumberDisplay').innerHTML = '';
    document.getElementById('results').innerHTML = '';
}

// Display all numbers side by side
function displayAllNumbers() {
    const data1 = getGridValues(document.getElementById('grid1'));
    const data2 = getGridValues(document.getElementById('grid2'));
    const container = document.getElementById('fullNumberDisplay');
    container.innerHTML = '';

    const flat1 = data1.flat();
    const flat2 = data2.flat();

    // Add grid 1 numbers
    for (let i=0; i<flat1.length; i++) {
        const block = document.createElement('div');
        block.className='number-block';
        block.innerText = flat1[i] !== '' ? flat1[i] : '?';
        container.appendChild(block);
    }

    // Add grid 2 numbers
    for (let i=0; i<flat2.length; i++) {
        const block = document.createElement('div');
        block.className='number-block';
        block.innerText = flat2[i] !== '' ? flat2[i] : '?';
        container.appendChild(block);
    }
}

// Search for sequences
function performSearch() {
    const seq = document.getElementById('searchInput').value.trim();
    if (seq === '') {
        document.getElementById('results').innerHTML = 'Enter a sequence to search.';
        return;
    }
    if (!/^[0-9]+$/.test(seq)) {
        document.getElementById('results').innerHTML = 'Search sequence must be digits only.';
        return;
    }

    const data1 = getGridValues(document.getElementById('grid1'));
    const data2 = getGridValues(document.getElementById('grid2'));
    const fullNumbers1 = data1.flat().join('');
    const fullNumbers2 = data2.flat().join('');
    const combinedNumbers = fullNumbers1 + fullNumbers2;

    // Check if the sequence exists in the combined string
    const index = combinedNumbers.indexOf(seq);
    const resultDiv = document.getElementById('results');

    // Clear previous highlights
    document.querySelectorAll('.cell').forEach(c => c.classList.remove('highlight'));

    if (index !== -1) {
        // Highlight all digits in the sequence
        for (let i=0; i<combinedNumbers.length; i++) {
            if (i >= index && i < index + seq.length) {
                // Determine if in grid1 or grid2
                if (i < fullNumbers1.length) {
                    // in grid1
                    highlightCellInGrid('grid1', i);
                } else {
                    // in grid2
                    highlightCellInGrid('grid2', i - fullNumbers1.length);
                }
            }
        }
        resultDiv.innerHTML = `Sequence "${seq}" found in the combined grid numbers.`;
    } else {
        resultDiv.innerHTML = `Sequence "${seq}" not found.`;
    }
}

// Helper to highlight specific cell in grid
function highlightCellInGrid(gridId, index) {
    const grid = document.getElementById(gridId);
    const cells = grid.querySelectorAll('.cell');
    // Remove previous highlights
    cells.forEach(c => c.classList.remove('highlight'));
    if (index >= 0 && index < cells.length) {
        cells[index].classList.add('highlight');
    }
}

// Event bindings
document.getElementById('generateBtn').addEventListener('click', generateGrids);
document.getElementById('clearBtn').addEventListener('click', clearAll);
document.getElementById('searchBtn').addEventListener('click', performSearch);

// Initialize empty grids on load
window.onload = () => {
    createGrid(document.getElementById('grid1'), []);
    createGrid(document.getElementById('grid2'), []);
};
</script>

</body>
</html>

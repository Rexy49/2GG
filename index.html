<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Separate Permutation Generation & Categorization (No Duplicates)</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  h1 { text-align: center; margin-bottom: 20px; }
  .container { display: flex; gap: 20px; margin-bottom: 20px; }
  .grid-section { flex: 1; }
  h2 { text-align: center; }
  .grid { display: grid; grid-template-columns: repeat(4, 50px); gap: 10px; margin: 10px auto; }
  input { width: 50px; height: 50px; text-align: center; font-size: 20px; }
  button { display: block; margin: 20px auto; padding: 10px 20px; font-size: 16px; }
  /* Styles for side-by-side results */
  #results {
    display: flex;
    flex-direction: row;
    gap: 20px;
    justify-content: center;
    margin-top: 20px;
  }
  .result-column {
    flex: 1;
    max-height: 600px;
    overflow-y: auto;
  }
  .category { margin-bottom: 20px; }
  pre { background: #f4f4f4; padding: 10px; white-space: pre-wrap; word-wrap: break-word; }
</style>
</head>
<body>

<h1>Separate Permutation Generation & Categorization (No Duplicates)</h1>

<div class="container">
  <!-- Grid 1 -->
  <div class="grid-section" id="grid1-section">
    <h2>Input Grid 1</h2>
    <div class="grid" id="grid1">
      <input maxlength="1" value="1" /> <input maxlength="1" value="3" /> <input maxlength="1" value="4" /> <input maxlength="1" value="6" />
      <input maxlength="1" value="3" /> <input maxlength="1" value="4" /> <input maxlength="1" value="7" /> <input maxlength="1" value="6" />
      <input maxlength="1" value="4" /> <input maxlength="1" value="6" /> <input maxlength="1" value="7" /> <input maxlength="1" value="8" />
      <input maxlength="1" value="2" /> <input maxlength="1" value="5" /> <input maxlength="1" value="7" /> <input maxlength="1" value="9" />
    </div>
  </div>

  <!-- Grid 2 -->
  <div class="grid-section" id="grid2-section">
    <h2>Input Grid 2</h2>
    <div class="grid" id="grid2">
      <input maxlength="1" value="2" /> <input maxlength="1" value="4" /> <input maxlength="1" value="5" /> <input maxlength="1" value="7" />
      <input maxlength="1" value="3" /> <input maxlength="1" value="5" /> <input maxlength="1" value="8" /> <input maxlength="1" value="7" />
      <input maxlength="1" value="4" /> <input maxlength="1" value="7" /> <input maxlength="1" value="8" /> <input maxlength="1" value="9" />
      <input maxlength="1" value="1" /> <input maxlength="1" value="4" /> <input maxlength="1" value="6" /> <input maxlength="1" value="8" />
    </div>
  </div>
</div>

<button id="generateBtn">Generate & Categorize Separately (No Duplicates)</button>

<!-- Adjusted results display for side-by-side layout -->
<div class="results" id="results" style="display:none;">
  <h2>Results</h2>
  <div style="display:flex; gap:20px;">
    <div id="results-grid1" class="result-column"></div>
    <div id="results-grid2" class="result-column"></div>
  </div>
</div>

<script>
// Function to get columns from a grid
function getColumns(gridId) {
  const inputs = document.querySelectorAll(`#${gridId} input`);
  const columns = [[], [], [], []];
  for (let colIdx=0; colIdx<4; colIdx++) {
    for (let rowIdx=0; rowIdx<4; rowIdx++) {
      const index = rowIdx*4 + colIdx;
      const val = inputs[index].value.trim();
      if (val !== '') {
        columns[colIdx].push(val);
      }
    }
  }
  return columns;
}

// Generate all unique combinations using Set
function generateUniqueCombinations(columns) {
  const comboSet = new Set();
  for (let a of columns[0]) {
    for (let b of columns[1]) {
      for (let c of columns[2]) {
        for (let d of columns[3]) {
          comboSet.add(a + b + c + d);
        }
      }
    }
  }
  return Array.from(comboSet);
}

// Categorize permutations
function categorize(combos) {
  const categories = {
    '24-WAY': [], // all distinct
    '12-WAY': [], // one pair
    '6-WAY': [],  // two pairs
    '4-WAY': []   // triplet + single
  };

  // Use a Set to avoid duplicates during categorization
  const uniqueCombos = new Set(combos);

  uniqueCombos.forEach(c => {
    const digits = c.split('');
    const counts = {};
    digits.forEach(d => {
      counts[d] = (counts[d] || 0) + 1;
    });
    const countValues = Object.values(counts);
    const uniqueCount = Object.keys(counts).length;

    if (uniqueCount === 4) {
      // all distinct
      categories['24-WAY'].push(c);
    } else if (uniqueCount === 3) {
      // one pair + two singles
      if (countValues.includes(2)) {
        categories['12-WAY'].push(c);
      }
    } else if (uniqueCount === 2) {
      // either two pairs or triplet+single
      const pairCount = countValues.filter(v => v === 2).length;
      const tripletCount = countValues.includes(3) ? 1 : 0;
      if (pairCount === 2) {
        // two pairs
        categories['6-WAY'].push(c);
      } else if (tripletCount === 1) {
        // triplet + single
        categories['4-WAY'].push(c);
      }
    }
  });

  return categories;
}

// Helper to create sections with dynamic labels
function createCategorySection(categoryName, combos) {
  const count = combos.length;
  const title = `${categoryName} (${count})`;
  const section = document.createElement('div');
  section.className = 'category';
  section.innerHTML = `<h3>${title}</h3><pre>${combos.join(' ')}</pre>`;
  return section;
}

document.getElementById('generateBtn').addEventListener('click', () => {
  // Get columns
  const columns1 = getColumns('grid1');
  const columns2 = getColumns('grid2');

  // Generate unique combos for each grid
  const combos1 = generateUniqueCombinations(columns1);
  const combos2 = generateUniqueCombinations(columns2);

  // Categorize separately
  const categories1 = categorize(combos1);
  const categories2 = categorize(combos2);

  // Show results
  const resultsDiv = document.getElementById('results');
  resultsDiv.style.display = 'block';

  document.getElementById('results-grid1').innerHTML = '';
  document.getElementById('results-grid2').innerHTML = '';

  // Populate grid 1
  for (const [category, combos] of Object.entries(categories1)) {
    const sec = createCategorySection(`Grid 1 - ${category}`, combos);
    document.getElementById('results-grid1').appendChild(sec);
  }

  // Populate grid 2
  for (const [category, combos] of Object.entries(categories2)) {
    const sec = createCategorySection(`Grid 2 - ${category}`, combos);
    document.getElementById('results-grid2').appendChild(sec);
  }
});
</script>

</body>
</html>

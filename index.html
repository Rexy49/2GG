<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>4x4 Grid Pattern Search & Display</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 0 auto;
    max-width: 1200px;
    padding: 20px;
}
h1 {
    text-align: center;
}
.controls, .search-bar, .display-area {
    margin-bottom: 20px;
}
button {
    padding: 8px 15px;
    margin-right: 10px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
button:hover {
    background-color: #45a049;
}
#gridContainer {
    display: flex;
    flex-direction: row; /* side by side */
    flex-wrap: wrap; /* wrap on small screens */
    justify-content: center;
    gap: 20px;
}
.grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 5px;
}
.cell {
    border: 1px solid #ccc;
    padding: 15px;
    text-align: center;
    font-weight: bold;
    background-color: #f9f9f9;
}
.cell input {
    width: 50px;
    height: 50px;
    font-size: 24px;
    text-align: center;
}
#fullNumberDisplay {
    display: flex;
    flex-wrap: nowrap;
    overflow-x: auto;
    padding: 10px 0;
    border: 1px solid #ccc;
}
.number-block {
    display: inline-block;
    padding: 8px 12px;
    margin: 0 2px;
    background-color: #e0e0e0;
    border-radius: 4px;
    font-size: 20px;
    min-width: 40px;
    text-align: center;
}
.highlight {
    background-color: #ffeb3b;
}
</style>
</head>
<body>

<h1>4x4 Grid Pattern Search & Display</h1>

<div class="controls">
    <button id="loadExampleBtn">Load Example</button>
    <button id="clearBtn">Clear All</button>
</div>

<div class="search-bar">
    <input type="text" id="patternInput" placeholder="Enter pattern, e.g., 1-2-3" style="width: 200px; font-size:16px; padding:8px;"/>
    <button id="searchPatternBtn">Search Pattern</button>
</div>

<div class="search-bar">
    <input type="text" id="numberSearchInput" placeholder="Search number (0-9)" style="width: 200px; font-size:16px; padding:8px;"/>
    <button id="searchNumberBtn">Search Number</button>
</div>

<div id="gridContainer">
    <div>
        <h2 style="text-align:center;">Grid 1</h2>
        <div id="grid1" class="grid"></div>
    </div>
    <div>
        <h2 style="text-align:center;">Grid 2</h2>
        <div id="grid2" class="grid"></div>
    </div>
</div>

<h2 style="text-align:center;">All Numbers (Side by Side)</h2>
<div id="fullNumberDisplay"></div>

<h2>Results</h2>
<div id="results"></div>

<script>
const gridSize = 4;
let gridData1 = [];
let gridData2 = [];

// Create grid with inputs
function createGrid(gridElement, dataArray) {
    gridElement.innerHTML = '';
    for (let i=0; i<gridSize; i++) {
        for (let j=0; j<gridSize; j++) {
            const input = document.createElement('input');
            input.type = 'text';
            input.maxLength = 1; // only 1 character
            input.pattern = "[0-9]";
            input.placeholder = "0-9";
            input.value = dataArray && dataArray[i] ? dataArray[i][j] : '';
            input.style.width='50px';
            input.style.height='50px';
            input.style.fontSize='24px';
            input.style.textAlign='center';
            input.dataset.row = i;
            input.dataset.col = j;

            // Add event listener to restrict input to digits only
            input.addEventListener('input', function() {
                this.value = this.value.replace(/[^0-9]/g, '').slice(0,1);
            });

            const cell = document.createElement('div');
            cell.className='cell';
            cell.appendChild(input);
            gridElement.appendChild(cell);
        }
    }
}

// Get grid values
function getGridValues(gridElement) {
    const inputs = gridElement.querySelectorAll('input');
    const data = [];
    for (let i=0; i<gridSize; i++) {
        data[i] = [];
        for (let j=0; j<gridSize; j++) {
            const val = inputs[i*gridSize + j].value.trim();
            data[i][j] = val !== '' ? val : '';
        }
    }
    return data;
}

// Load example data
function loadExample() {
    gridData1 = [
        [1,2,3,4],
        [5,6,7,8],
        [9,0,1,2],
        [3,4,5,6]
    ];
    gridData2 = [
        [6,5,4,3],
        [2,1,0,9],
        [8,7,6,5],
        [4,3,2,1]
    ];
    createGrid(document.getElementById('grid1'), gridData1);
    createGrid(document.getElementById('grid2'), gridData2);
    displayAllNumbers();
    document.getElementById('results').innerHTML = '';
}

// Clear all grids and display
function clearAll() {
    createGrid(document.getElementById('grid1'), []);
    createGrid(document.getElementById('grid2'), []);
    document.getElementById('fullNumberDisplay').innerHTML = '';
    document.getElementById('results').innerHTML = '';
}

// Display all numbers side by side
function displayAllNumbers() {
    const data1 = getGridValues(document.getElementById('grid1'));
    const data2 = getGridValues(document.getElementById('grid2'));
    const container = document.getElementById('fullNumberDisplay');
    container.innerHTML = '';

    const flat1 = data1.flat();
    const flat2 = data2.flat();

    // Add grid 1 numbers
    for (let i=0; i<flat1.length; i++) {
        const block = document.createElement('div');
        block.className='number-block';
        block.innerText = flat1[i] !== '' ? flat1[i] : '?';
        container.appendChild(block);
    }

    // Add grid 2 numbers
    for (let i=0; i<flat2.length; i++) {
        const block = document.createElement('div');
        block.className='number-block';
        block.innerText = flat2[i] !== '' ? flat2[i] : '?';
        container.appendChild(block);
    }
}

// Event listeners
document.getElementById('loadExampleBtn').addEventListener('click', loadExample);
document.getElementById('clearBtn').addEventListener('click', clearAll);
window.onload = () => {
    createGrid(document.getElementById('grid1'), []);
    createGrid(document.getElementById('grid2'), []);
};

// Search pattern
document.getElementById('searchPatternBtn').addEventListener('click', () => {
    performPatternSearch();
});

// Search number
document.getElementById('searchNumberBtn').addEventListener('click', () => {
    performNumberSearch();
});

// Perform pattern search
function performPatternSearch() {
    const patternStr = document.getElementById('patternInput').value.trim();
    if (!patternStr) {
        document.getElementById('results').innerHTML = 'Enter a pattern.';
        return;
    }
    const pattern = patternStr.split(/[-,\s]+/).filter(s => s !== '');
    // Validate pattern contains only digits 0-9
    if (!pattern.every(n => /^[0-9]$/.test(n))) {
        document.getElementById('results').innerHTML = 'Pattern must contain digits 0-9.';
        return;
    }
    const data1 = getGridValues(document.getElementById('grid1'));
    const data2 = getGridValues(document.getElementById('grid2'));
    const resultDiv = document.getElementById('results');

    // Remove previous highlights
    document.querySelectorAll('.cell').forEach(c => c.classList.remove('highlight'));

    const foundInGrid1 = findPatternInGrid(data1, pattern);
    const foundInGrid2 = findPatternInGrid(data2, pattern);

    resultDiv.innerHTML = '';
    if (foundInGrid1) {
        const div = document.createElement('div');
        div.innerHTML = `<strong>Pattern found in Grid 1</strong>`;
        resultDiv.appendChild(div);
        highlightPatternInGrid('grid1', foundInGrid1);
    }
    if (foundInGrid2) {
        const div = document.createElement('div');
        div.innerHTML = `<strong>Pattern found in Grid 2</strong>`;
        resultDiv.appendChild(div);
        highlightPatternInGrid('grid2', foundInGrid2);
    }
    if (!foundInGrid1 && !foundInGrid2) {
        resultDiv.innerHTML = 'Pattern not found in either grid.';
    }
}

// Perform number search
function performNumberSearch() {
    const searchNumber = document.getElementById('numberSearchInput').value.trim();
    if (!/^[0-9]$/.test(searchNumber)) {
        document.getElementById('results').innerHTML = 'Enter a single digit (0-9).';
        return;
    }
    const data1 = getGridValues(document.getElementById('grid1'));
    const data2 = getGridValues(document.getElementById('grid2'));
    const resultDiv = document.getElementById('results');

    // Remove previous highlights
    document.querySelectorAll('.cell').forEach(c => c.classList.remove('highlight'));

    const foundInGrid1 = findNumberInGrid(data1, searchNumber);
    const foundInGrid2 = findNumberInGrid(data2, searchNumber);

    resultDiv.innerHTML = '';
    if (foundInGrid1) {
        const div = document.createElement('div');
        div.innerHTML = `<strong>Number ${searchNumber} found in Grid 1</strong>`;
        resultDiv.appendChild(div);
        highlightNumberInGrid('grid1', searchNumber);
    }
    if (foundInGrid2) {
        const div = document.createElement('div');
        div.innerHTML = `<strong>Number ${searchNumber} found in Grid 2</strong>`;
        resultDiv.appendChild(div);
        highlightNumberInGrid('grid2', searchNumber);
    }
    if (!foundInGrid1 && !foundInGrid2) {
        resultDiv.innerHTML = `Number ${searchNumber} not found in either grid.`;
    }
}

// Pattern search helper
function findPatternInGrid(data, pattern) {
    for (let r=0; r<gridSize; r++) {
        for (let c=0; c<gridSize; c++) {
            if (data[r][c] === pattern[0]) {
                const visited = new Set();
                if (searchPatternRec(data, r, c, pattern, 0, visited)) {
                    return {row: r, col: c};
                }
            }
        }
    }
    return null;
}

function searchPatternRec(data, r, c, pattern, index, visited) {
    if (index >= pattern.length) return true;
    if (r < 0 || r >= gridSize || c < 0 || c >= gridSize) return false;
    const key = r + ',' + c;
    if (visited.has(key)) return false;
    if (data[r][c] !== pattern[index]) return false;

    visited.add(key);
    const directions = [[-1,0], [1,0], [0,-1], [0,1]];
    for (const [dr, dc] of directions) {
        if (searchPatternRec(data, r+dr, c+dc, pattern, index+1, visited)) {
            return true;
        }
    }
    visited.delete(key);
    return false;
}

// Highlight pattern start cell
function highlightPatternInGrid(gridId, info) {
    const grid = document.getElementById(gridId);
    grid.querySelectorAll('.cell').forEach(c => c.classList.remove('highlight'));
    if (info) {
        const index = info.row * gridSize + info.col;
        const cell = grid.querySelectorAll('.cell')[index];
        cell.classList.add('highlight');
    }
}

// Find number in grid
function findNumberInGrid(data, number) {
    for (let r=0; r<gridSize; r++) {
        for (let c=0; c<gridSize; c++) {
            if (data[r][c] === number) {
                return {row: r, col: c};
            }
        }
    }
    return null;
}

// Highlight number in grid
function highlightNumberInGrid(gridId, number) {
    const grid = document.getElementById(gridId);
    grid.querySelectorAll('.cell').forEach(c => c.classList.remove('highlight'));
    grid.querySelectorAll('.cell').forEach((cell, index) => {
        const val = cell.querySelector('input').value.trim();
        if (val === number) {
            cell.classList.add('highlight');
        }
    });
}

// Event bindings
document.getElementById('loadExampleBtn').addEventListener('click', () => {
    loadExample();
});
document.getElementById('clearBtn').addEventListener('click', () => {
    clearAll();
});
document.getElementById('searchPatternBtn').addEventListener('click', () => {
    performPatternSearch();
});
document.getElementById('searchNumberBtn').addEventListener('click', () => {
    performNumberSearch();
});

// Initialize empty grids
window.onload = () => {
    createGrid(document.getElementById('grid1'), []);
    createGrid(document.getElementById('grid2'), []);
};
</script>
</body>
</html>
